<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è | –ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –¥–æ—à–∫–æ–ª—å–Ω–∏–∫–æ–≤</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Comic Sans MS', 'Chalkboard SE', 'Arial Rounded MT Bold', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
            width: 100%;
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 10px;
        }

        .logo-icon {
            font-size: 2.5rem;
            color: #ff6b6b;
            animation: bounce 2s infinite;
        }

        .logo h1 {
            color: #4a148c;
            font-size: 2.8rem;
            text-shadow: 3px 3px 0 #ffcc00;
            letter-spacing: 1px;
        }

        .subtitle {
            color: #5d4037;
            font-size: 1.4rem;
            margin-bottom: 20px;
            text-align: center;
            max-width: 600px;
            margin: 0 auto 30px;
        }

        .container {
            display: flex;
            max-width: 1000px;
            width: 100%;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 25px;
            overflow: hidden;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
            margin-bottom: 30px;
        }

        .illustration {
            flex: 1;
            background: linear-gradient(to bottom right, #6a11cb 0%, #2575fc 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 30px;
            color: white;
            position: relative;
        }

            .illustration h2 {
                font-size: 2rem;
                margin-bottom: 20px;
                text-align: center;
                text-shadow: 2px 2px 0 #4a148c;
            }

        .character {
            font-size: 8rem;
            margin: 20px 0;
            animation: float 4s ease-in-out infinite;
        }

        .illustration p {
            font-size: 1.2rem;
            text-align: center;
            line-height: 1.6;
            max-width: 350px;
        }

        .registration-form {
            flex: 1;
            padding: 40px;
            display: flex;
            flex-direction: column;
        }

        .form-title {
            color: #4a148c;
            font-size: 2.2rem;
            margin-bottom: 25px;
            text-align: center;
            position: relative;
        }

            .form-title:after {
                content: '';
                position: absolute;
                bottom: -10px;
                left: 50%;
                transform: translateX(-50%);
                width: 80px;
                height: 5px;
                background-color: #ffcc00;
                border-radius: 5px;
            }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #5d4037;
            font-size: 1.1rem;
            font-weight: bold;
        }

        input, select {
            width: 100%;
            padding: 15px;
            border: 3px solid #ffcc00;
            border-radius: 15px;
            font-size: 1.1rem;
            outline: none;
            transition: all 0.3s;
        }

            input:focus, select:focus {
                border-color: #ff6b6b;
                box-shadow: 0 0 0 3px rgba(255, 107, 107, 0.3);
            }

        .password-strength {
            margin-top: 5px;
            font-size: 0.9rem;
            display: none;
        }

            .password-strength.weak {
                color: #ff6b6b;
            }

            .password-strength.medium {
                color: #ffa726;
            }

            .password-strength.strong {
                color: #4caf50;
            }

        .role-selection {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .role-option {
            flex: 1;
            min-width: 150px;
            text-align: center;
            padding: 20px 15px;
            border: 3px solid #e0e0e0;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            background-color: #f9f9f9;
        }

            .role-option:hover {
                transform: translateY(-5px);
                box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
            }

            .role-option.selected {
                border-color: #ff6b6b;
                background-color: #fff9f9;
                box-shadow: 0 5px 15px rgba(255, 107, 107, 0.2);
            }

        .role-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: #6a11cb;
        }

        .role-option.selected .role-icon {
            color: #ff6b6b;
        }

        .role-name {
            font-size: 1.3rem;
            font-weight: bold;
            color: #4a148c;
            margin-bottom: 5px;
        }

        .role-desc {
            font-size: 0.9rem;
            color: #757575;
        }

        .role-option.admin {
            border-color: #4a148c;
        }

            .role-option.admin.selected {
                border-color: #ff6b6b;
                background-color: #fff9f9;
            }

            .role-option.admin .role-icon {
                color: #4a148c;
            }

            .role-option.admin.selected .role-icon {
                color: #ff6b6b;
            }

        .admin-fields {
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 15px;
            margin-top: 15px;
            border: 2px dashed #4a148c;
            display: none;
        }

            .admin-fields.active {
                display: block;
                animation: fadeIn 0.5s ease;
            }

        .checkbox-group {
            display: flex;
            align-items: flex-start;
            margin-bottom: 25px;
        }

            .checkbox-group input {
                width: auto;
                margin-right: 10px;
                margin-top: 5px;
            }

            .checkbox-group label {
                font-size: 0.95rem;
                line-height: 1.5;
            }

        .terms-link {
            color: #6a11cb;
            text-decoration: none;
            font-weight: bold;
        }

            .terms-link:hover {
                text-decoration: underline;
            }

        .submit-btn {
            background: linear-gradient(to right, #ff6b6b, #ff8e53);
            color: white;
            border: none;
            padding: 18px;
            border-radius: 15px;
            font-size: 1.3rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
        }

            .submit-btn:hover {
                transform: translateY(-3px);
                box-shadow: 0 8px 20px rgba(255, 107, 107, 0.6);
            }

            .submit-btn:active {
                transform: translateY(0);
            }

        .login-link {
            text-align: center;
            margin-top: 25px;
            color: #5d4037;
        }

            .login-link a {
                color: #6a11cb;
                text-decoration: none;
                font-weight: bold;
            }

                .login-link a:hover {
                    text-decoration: underline;
                }

        .footer {
            text-align: center;
            color: #5d4037;
            font-size: 0.9rem;
            margin-top: 20px;
            width: 100%;
            padding: 15px;
            border-top: 2px dashed #ffcc00;
        }

        @keyframes bounce {
            0%, 100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-20px);
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @media (max-width: 900px) {
            .container {
                flex-direction: column;
            }

            .illustration {
                padding: 30px 20px;
            }

            .character {
                font-size: 6rem;
            }

            .role-selection {
                flex-direction: column;
            }

            .role-option {
                min-width: 100%;
            }
        }

        @media (max-width: 600px) {
            .logo h1 {
                font-size: 2.2rem;
            }

            .subtitle {
                font-size: 1.1rem;
            }

            .registration-form {
                padding: 30px 20px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="logo">
            <i class="fas fa-laptop-code logo-icon"></i>
            <h1>–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –¥–æ—à–∫–æ–ª—å–Ω–∏–∫–æ–≤</h1>
        </div>
        <p class="subtitle">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ –Ω–∞—à–µ–º—É –≤–µ—Å–µ–ª–æ–º—É –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—é –≤ –º–∏—Ä –∫–æ–¥–∞! –£—á–∏–º –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é —á–µ—Ä–µ–∑ –∏–≥—Ä—ã –∏ —Å–∫–∞–∑–∫–∏.</p>
    </div>

    <div class="container">
        <div class="illustration">
            <h2>–ü—Ä–∏–≤–µ—Ç, –¥—Ä—É–≥!</h2>
            <div class="character">üê±</div>
            <p>–Ø –ì–Ω–æ–º–∏–∫-–ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç! –Ø –ø–æ–º–æ–≥—É —Ç–µ–±–µ –Ω–∞—É—á–∏—Ç—å—Å—è —Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞—Ç—å —Å –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–º –Ω–∞ –µ–≥–æ —è–∑—ã–∫–µ. –í–º–µ—Å—Ç–µ –º—ã –±—É–¥–µ–º —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏–≥—Ä—ã, —Ä–∏—Å–æ–≤–∞—Ç—å –∫–∞—Ä—Ç–∏–Ω–∫–∏ –∏ —Ä–µ—à–∞—Ç—å –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ –∑–∞–¥–∞—á–∫–∏!</p>
            <div style="margin-top: 30px; display: flex; gap: 15px;">
                <div style="background-color: rgba(255, 255, 255, 0.2); padding: 10px 15px; border-radius: 10px;">
                    <i class="fas fa-gamepad"></i> –í–µ—Å—ë–ª—ã–µ –∏–≥—Ä—ã
                </div>
                <div style="background-color: rgba(255, 255, 255, 0.2); padding: 10px 15px; border-radius: 10px;">
                    <i class="fas fa-paint-brush"></i> –ö—Ä–∞—Å–æ—á–Ω—ã–µ —É—Ä–æ–∫–∏
                </div>
            </div>
        </div>

        <div class="registration-form">
            <h2 class="form-title">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>

            <form id="registrationForm">
                <div class="form-group">
                    <label for="fullName"><i class="fas fa-user"></i> –ò–º—è –∏ —Ñ–∞–º–∏–ª–∏—è:</label>
                    <input type="text" id="fullName" name="fullName" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ú–∞—Ä–∏—è –ò–≤–∞–Ω–æ–≤–∞" required>
                </div>

                <div class="form-group">
                    <label for="email"><i class="fas fa-envelope"></i> –≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞:</label>
                    <input type="email" id="email" name="email" placeholder="–≤–∞—à–∞_–ø–æ—á—Ç–∞@–ø—Ä–∏–º–µ—Ä.com" required>
                </div>

                <div class="form-group">
                    <label for="password"><i class="fas fa-lock"></i> –ü–∞—Ä–æ–ª—å:</label>
                    <input type="password" id="password" name="password" placeholder="–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –Ω–∞–¥—ë–∂–Ω—ã–π –ø–∞—Ä–æ–ª—å" required minlength="6">
                    <div id="passwordStrength" class="password-strength"></div>
                </div>

                <div class="form-group">
                    <label for="confirmPassword"><i class="fas fa-lock"></i> –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å:</label>
                    <input type="password" id="confirmPassword" name="confirmPassword" placeholder="–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å" required>
                </div>

                <div class="form-group">
                    <label>–ö—Ç–æ –≤—ã?</label>
                    <div class="role-selection">
                        <div class="role-option" id="parentRole">
                            <div class="role-icon"><i class="fas fa-user-friends"></i></div>
                            <div class="role-name">–†–æ–¥–∏—Ç–µ–ª—å</div>
                            <div class="role-desc">–•–æ—á—É –ø–æ–º–æ—á—å —Ä–µ–±–µ–Ω–∫—É –∏–∑—É—á–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ</div>
                        </div>

                        <div class="role-option" id="childRole">
                            <div class="role-icon"><i class="fas fa-child"></i></div>
                            <div class="role-name">–î–æ—à–∫–æ–ª—å–Ω–∏–∫</div>
                            <div class="role-desc">–•–æ—á—É —É—á–∏—Ç—å—Å—è –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞—Ç—å —Å –ì–Ω–æ–º–∏–∫–æ–º</div>
                        </div>

                        <div class="role-option admin" id="adminRole">
                            <div class="role-icon"><i class="fas fa-crown"></i></div>
                            <div class="role-name">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</div>
                            <div class="role-desc">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</div>
                        </div>
                    </div>
                    <input type="hidden" id="role" name="role" value="parent" required>
                </div>

                <div class="admin-fields" id="adminFields">
                    <div class="form-group">
                        <label for="adminCode"><i class="fas fa-key"></i> –ö–æ–¥ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:</label>
                        <input type="password" id="adminCode" name="adminCode" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–¥">
                    </div>

                    <div class="form-group">
                        <label for="adminPosition"><i class="fas fa-briefcase"></i> –î–æ–ª–∂–Ω–æ—Å—Ç—å:</label>
                        <select id="adminPosition" name="adminPosition">
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –¥–æ–ª–∂–Ω–æ—Å—Ç—å</option>
                            <option value="content">–ö–æ–Ω—Ç–µ–Ω—Ç-–º–µ–Ω–µ–¥–∂–µ—Ä</option>
                            <option value="moderator">–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä</option>
                            <option value="superadmin">–°—É–ø–µ—Ä-–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="childAge"><i class="fas fa-birthday-cake"></i> –í–æ–∑—Ä–∞—Å—Ç —Ä–µ–±–µ–Ω–∫–∞ (–µ—Å–ª–∏ –≤—ã —Ä–æ–¥–∏—Ç–µ–ª—å):</label>
                    <select id="childAge" name="childAge">
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≤–æ–∑—Ä–∞—Å—Ç</option>
                        <option value="3-4">3-4 –≥–æ–¥–∞</option>
                        <option value="5-6">5-6 –ª–µ—Ç</option>
                        <option value="7-8">7-8 –ª–µ—Ç</option>
                    </select>
                </div>

                <div class="checkbox-group">
                    <input type="checkbox" id="terms" name="terms" required>
                    <label for="terms">–Ø —Å–æ–≥–ª–∞—à–∞—é—Å—å —Å <a href="#" class="terms-link">—É—Å–ª–æ–≤–∏—è–º–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</a> –∏ –¥–∞—é —Å–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö</label>
                </div>

                <div class="checkbox-group">
                    <input type="checkbox" id="newsletter" name="newsletter">
                    <label for="newsletter">–•–æ—á—É –ø–æ–ª—É—á–∞—Ç—å –Ω–æ–≤–æ—Å—Ç–∏ –æ –Ω–æ–≤—ã—Ö —É—Ä–æ–∫–∞—Ö –∏ –∏–≥—Ä–∞—Ö</label>
                </div>

                <button type="submit" class="submit-btn">
                    <i class="fas fa-rocket"></i> –ù–∞—á–∞—Ç—å –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ!
                </button>
            </form>

            <div class="login-link">
                –£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <a href="login.html">–í–æ–π—Ç–∏</a>
            </div>
        </div>
    </div>

    <div class="footer">
        <p>¬© 2023 –ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –¥–æ—à–∫–æ–ª—å–Ω–∏–∫–æ–≤. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã. | <a href="#" style="color: #6a11cb;">–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a></p>
        <p style="margin-top: 10px;">–°–∞–π—Ç —Å–æ–∑–¥–∞–Ω —Å ‚ù§Ô∏è –¥–ª—è –º–∞–ª–µ–Ω—å–∫–∏—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–æ–≤</p>
    </div>

    <script>
        // ============================================
        // –ù–û–í–ê–Ø –ü–†–û–°–¢–ê–Ø –°–ò–°–¢–ï–ú–ê –•–†–ê–ù–ï–ù–ò–Ø –î–ê–ù–ù–´–•
        // ============================================

        // –ö–ª—é—á –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ localStorage
        const USERS_STORAGE_KEY = 'preschool_users_data';

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        function getAllUsers() {
            try {
                const usersData = localStorage.getItem(USERS_STORAGE_KEY);
                if (!usersData) {
                    // –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç, —Å–æ–∑–¥–∞–µ–º –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤
                    localStorage.setItem(USERS_STORAGE_KEY, JSON.stringify([]));
                    return [];
                }
                return JSON.parse(usersData);
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:', error);
                return [];
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function saveNewUser(userData) {
            try {
                // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
                const users = getAllUsers();

                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ—Ç –ª–∏ —É–∂–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Ç–∞–∫–∏–º email
                const existingUser = users.find(user => user.email === userData.email);
                if (existingUser) {
                    return {
                        success: false,
                        message: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º email —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç!'
                    };
                }

                // –î–æ–±–∞–≤–ª—è–µ–º ID –∏ –¥–∞—Ç—É —Å–æ–∑–¥–∞–Ω–∏—è
                userData.id = Date.now().toString();
                userData.createdAt = new Date().toISOString();

                // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                users.push(userData);

                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ–±—Ä–∞—Ç–Ω–æ –≤ localStorage
                localStorage.setItem(USERS_STORAGE_KEY, JSON.stringify(users));

                console.log('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω:', userData);
                console.log('–í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:', users);

                return {
                    success: true,
                    user: userData
                };
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:', error);
                return {
                    success: false,
                    message: '–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö'
                };
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function checkUserCredentials(email, password) {
            const users = getAllUsers();
            const user = users.find(user =>
                user.email.toLowerCase() === email.toLowerCase() &&
                user.password === password
            );
            return user || null;
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        function debugShowUsers() {
            const users = getAllUsers();
            console.log('=== –û–¢–õ–ê–î–ö–ê: –í—Å–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ ===');
            if (users.length === 0) {
                console.log('–ù–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π');
            } else {
                users.forEach((user, index) => {
                    console.log(`${index + 1}. –ò–º—è: ${user.fullName}, Email: ${user.email}, –ü–∞—Ä–æ–ª—å: ${user.password}, –†–æ–ª—å: ${user.role}`);
                });
            }
            console.log('============================================');
            return users;
        }

        // ============================================
        // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –¢–ï–°–¢–û–í–´–• –î–ê–ù–ù–´–•
        // ============================================
        function initializeTestData() {
            const users = getAllUsers();

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
            const testEmails = ['parent@example.com', 'child@example.com', 'admin@example.com'];
            let hasTestUsers = false;

            for (const email of testEmails) {
                if (users.find(user => user.email === email)) {
                    hasTestUsers = true;
                    break;
                }
            }

            // –ï—Å–ª–∏ —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–µ—Ç, –¥–æ–±–∞–≤–ª—è–µ–º –∏—Ö
            if (!hasTestUsers && users.length === 0) {
                const testUsers = [
                    {
                        id: '1',
                        fullName: '–¢–µ—Å—Ç–æ–≤—ã–π –†–æ–¥–∏—Ç–µ–ª—å',
                        email: 'parent@example.com',
                        password: '123456',
                        role: 'parent',
                        childAge: '5-6',
                        newsletter: true,
                        createdAt: new Date().toISOString()
                    },
                    {
                        id: '2',
                        fullName: '–¢–µ—Å—Ç–æ–≤—ã–π –î–æ—à–∫–æ–ª—å–Ω–∏–∫',
                        email: 'child@example.com',
                        password: '123456',
                        role: 'child',
                        childAge: '',
                        newsletter: false,
                        createdAt: new Date().toISOString()
                    },
                    {
                        id: '3',
                        fullName: '–¢–µ—Å—Ç–æ–≤—ã–π –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä',
                        email: 'admin@example.com',
                        password: '123456',
                        role: 'admin',
                        adminCode: 'LLL',
                        adminPosition: 'superadmin',
                        newsletter: false,
                        createdAt: new Date().toISOString()
                    }
                ];

                testUsers.forEach(user => {
                    const result = saveNewUser(user);
                    if (result.success) {
                        console.log(`–¢–µ—Å—Ç–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ${user.email} —Å–æ–∑–¥–∞–Ω`);
                    }
                });
            }

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—Ç–ª–∞–¥–æ—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
            debugShowUsers();
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        initializeTestData();

        // ============================================
        // –û–°–ù–û–í–ù–û–ô –ö–û–î –°–¢–†–ê–ù–ò–¶–´ –†–ï–ì–ò–°–¢–†–ê–¶–ò–ò
        // ============================================

        // –≠–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–æ–ª—è–º–∏
        const parentRole = document.getElementById('parentRole');
        const childRole = document.getElementById('childRole');
        const adminRole = document.getElementById('adminRole');
        const roleInput = document.getElementById('role');
        const childAgeSelect = document.getElementById('childAge');
        const adminFields = document.getElementById('adminFields');
        const adminCodeInput = document.getElementById('adminCode');
        const adminPositionSelect = document.getElementById('adminPosition');
        const passwordInput = document.getElementById('password');
        const confirmPasswordInput = document.getElementById('confirmPassword');
        const passwordStrength = document.getElementById('passwordStrength');

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –ø–∞—Ä–æ–ª—è
        passwordInput.addEventListener('input', function () {
            const password = this.value;
            let strength = '';
            let strengthClass = '';

            if (password.length === 0) {
                passwordStrength.style.display = 'none';
                return;
            }

            passwordStrength.style.display = 'block';

            if (password.length < 6) {
                strength = '–°–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–π –ø–∞—Ä–æ–ª—å';
                strengthClass = 'weak';
            } else if (password.length < 8) {
                strength = '–°–ª–∞–±—ã–π –ø–∞—Ä–æ–ª—å';
                strengthClass = 'weak';
            } else if (password.length < 10) {
                strength = '–°—Ä–µ–¥–Ω–∏–π –ø–∞—Ä–æ–ª—å';
                strengthClass = 'medium';
            } else {
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —Ä–∞–∑–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
                const hasUpper = /[A-Z]/.test(password);
                const hasLower = /[a-z]/.test(password);
                const hasNumbers = /\d/.test(password);
                const hasSpecial = /[!@#$%^&*(),.?":{}|<>]/.test(password);

                const complexity = [hasUpper, hasLower, hasNumbers, hasSpecial].filter(Boolean).length;

                if (complexity >= 3) {
                    strength = '–°–∏–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å';
                    strengthClass = 'strong';
                } else if (complexity >= 2) {
                    strength = '–°—Ä–µ–¥–Ω–∏–π –ø–∞—Ä–æ–ª—å';
                    strengthClass = 'medium';
                } else {
                    strength = '–°–ª–∞–±—ã–π –ø–∞—Ä–æ–ª—å';
                    strengthClass = 'weak';
                }
            }

            passwordStrength.textContent = strength;
            passwordStrength.className = `password-strength ${strengthClass}`;
        });

        // –§—É–Ω–∫—Ü–∏—è —Å–±—Ä–æ—Å–∞ –≤—ã–±–æ—Ä–∞ —Ä–æ–ª–∏
        function resetRoleSelection() {
            parentRole.classList.remove('selected');
            childRole.classList.remove('selected');
            adminRole.classList.remove('selected');
            adminFields.classList.remove('active');
            adminCodeInput.required = false;
            adminPositionSelect.required = false;
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ä–æ–ª–∏
        parentRole.addEventListener('click', () => {
            resetRoleSelection();
            parentRole.classList.add('selected');
            roleInput.value = 'parent';
            childAgeSelect.disabled = false;
            childAgeSelect.required = true;
        });

        childRole.addEventListener('click', () => {
            resetRoleSelection();
            childRole.classList.add('selected');
            roleInput.value = 'child';
            childAgeSelect.disabled = true;
            childAgeSelect.required = false;
            childAgeSelect.value = '';
        });

        adminRole.addEventListener('click', () => {
            resetRoleSelection();
            adminRole.classList.add('selected');
            roleInput.value = 'admin';
            childAgeSelect.disabled = true;
            childAgeSelect.required = false;
            childAgeSelect.value = '';
            adminFields.classList.add('active');
            adminCodeInput.required = true;
            adminPositionSelect.required = true;
        });

        // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—ã–±—Ä–∞–Ω–∞ —Ä–æ–ª—å "–†–æ–¥–∏—Ç–µ–ª—å"
        parentRole.classList.add('selected');
        childAgeSelect.required = true;

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã
        document.getElementById('registrationForm').addEventListener('submit', function (e) {
            e.preventDefault();

            console.log('–ù–∞—á–∞–ª–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏...');

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–æ–ª–µ–π
            const password = passwordInput.value;
            const confirmPassword = confirmPasswordInput.value;

            if (password !== confirmPassword) {
                alert('–û—à–∏–±–∫–∞: –ü–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç!');
                confirmPasswordInput.focus();
                return;
            }

            if (password.length < 6) {
                alert('–û—à–∏–±–∫–∞: –ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤!');
                passwordInput.focus();
                return;
            }

            // –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã
            const formData = {
                fullName: document.getElementById('fullName').value.trim(),
                email: document.getElementById('email').value.trim().toLowerCase(),
                password: password,
                role: roleInput.value,
                childAge: document.getElementById('childAge').value,
                newsletter: document.getElementById('newsletter').checked,
                terms: document.getElementById('terms').checked
            };

            console.log('–î–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:', formData);

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ —Å–æ–≥–ª–∞—Å–∏–µ —Å —É—Å–ª–æ–≤–∏—è–º–∏
            if (!formData.terms) {
                alert('–í—ã –¥–æ–ª–∂–Ω—ã —Å–æ–≥–ª–∞—Å–∏—Ç—å—Å—è —Å —É—Å–ª–æ–≤–∏—è–º–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è!');
                return;
            }

            // –î–æ–±–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞, –µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–∞ —ç—Ç–∞ —Ä–æ–ª—å
            if (formData.role === 'admin') {
                formData.adminCode = adminCodeInput.value;
                formData.adminPosition = adminPositionSelect.value;

                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
                if (formData.adminCode !== 'LLL') {
                    alert('–ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞! –î–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–¥: LLL');
                    return;
                }

                if (!formData.adminPosition) {
                    alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –¥–æ–ª–∂–Ω–æ—Å—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞!');
                    return;
                }
            }

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            const result = saveNewUser(formData);

            if (!result.success) {
                alert(result.message);
                return;
            }

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
            let roleMessage = '';
            switch (formData.role) {
                case 'parent':
                    roleMessage = '–í—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –∫–∞–∫ —Ä–æ–¥–∏—Ç–µ–ª—å.';
                    break;
                case 'child':
                    roleMessage = '–í—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –∫–∞–∫ –¥–æ—à–∫–æ–ª—å–Ω–∏–∫. –ü—Ä–∏—è—Ç–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è!';
                    break;
                case 'admin':
                    roleMessage = `–í—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä (${formData.adminPosition}). –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ—Å–ª–µ –≤—Ö–æ–¥–∞.`;
                    break;
            }

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–µ–∫—É—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –≤ sessionStorage
            sessionStorage.setItem('currentUser', JSON.stringify({
                id: result.user.id,
                fullName: result.user.fullName,
                email: result.user.email,
                role: result.user.role,
                childAge: result.user.childAge
            }));

            console.log('–î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ sessionStorage');

            alert(`‚úÖ –£—Ä–∞! –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ!\n\n–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ${formData.fullName}!\n${roleMessage}\n\n–°–µ–π—á–∞—Å –≤—ã –±—É–¥–µ—Ç–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç...`);

            // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∞–∫–∫–∞—É–Ω—Ç–∞ —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                window.location.href = 'account.html';
            }, 2000);
        });

        // –ú–µ–Ω—è–µ–º –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Ä–æ–ª–∏
        const character = document.querySelector('.character');

        parentRole.addEventListener('click', () => {
            character.textContent = 'üë®‚Äçüëß';
        });

        childRole.addEventListener('click', () => {
            character.textContent = 'üê±';
        });

        adminRole.addEventListener('click', () => {
            character.textContent = 'üëë';
        });

        // –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        console.log('–°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
        debugShowUsers();
        // –ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
function registerUser(userData) {
    const users = getUsers();


    const newUser = {
        id: Date.now().toString(),
        fullName: userData.fullName,
        email: userData.email,
        password: userData.password, // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –Ω—É–∂–Ω–æ —Ö–µ—à–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–æ–ª—å!
        role: userData.role || 'parent',
        status: 'active',
        createdAt: new Date().toISOString(),
        updatedAt: new Date().toISOString()
    };

    if (userData.childAge) {
        newUser.childAge = parseInt(userData.childAge);
    }

    users.push(newUser);
    localStorage.setItem(USERS_KEY, JSON.stringify(users));

    return {
        success: true,
        message: '–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞!',
        user: newUser
    };
}
    // ============================================
// –°–ò–ù–•–†–û–ù–ò–ó–ò–†–û–í–ê–ù–ù–ê–Ø –°–ò–°–¢–ï–ú–ê –•–†–ê–ù–ï–ù–ò–Ø –î–ê–ù–ù–´–•
// ============================================

// –ö–ª—é—á–∏ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è (—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ —Å –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å—é)
const USERS_KEY = 'preschool_programming_users';
const CURRENT_USER_KEY = 'currentUser';

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—Å–æ–≤–º–µ—Å—Ç–∏–º–∞—è)
function getUsers() {
    try {
        const usersData = localStorage.getItem(USERS_KEY);
        if (!usersData) {
            // –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç, —Å–æ–∑–¥–∞–µ–º –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤
            const initialUsers = [];
            localStorage.setItem(USERS_KEY, JSON.stringify(initialUsers));
            return initialUsers;
        }
        return JSON.parse(usersData);
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:', error);
        return [];
    }
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Å–æ–≤–º–µ—Å—Ç–∏–º–∞—è —Å –∞–¥–º–∏–Ω–∫–æ–π)
function saveUser(userData) {
    try {
        // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        const users = getUsers();

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ—Ç –ª–∏ —É–∂–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Ç–∞–∫–∏–º email
        const existingUser = users.find(user => user.email === userData.email);
        if (existingUser) {
            return {
                success: false,
                message: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º email —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç!'
            };
        }

        // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ –≤ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
        const newUser = {
            id: Date.now().toString(),
            fullName: userData.fullName,
            email: userData.email,
            password: userData.password,
            role: userData.role,
            status: 'active',
            createdAt: new Date().toISOString(),
            updatedAt: new Date().toISOString()
        };

        // –î–æ–±–∞–≤–ª—è–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–æ–ª–∏
        if (userData.role === 'parent' && userData.childAge) {
            newUser.childAge = userData.childAge;
        } else if (userData.role === 'admin') {
            newUser.adminCode = userData.adminCode;
            newUser.adminPosition = userData.adminPosition;
        }

        // –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ —Ä–∞—Å—Å—ã–ª–∫—É
        newUser.newsletter = userData.newsletter || false;

        // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        users.push(newUser);

        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ–±—Ä–∞—Ç–Ω–æ –≤ localStorage
        localStorage.setItem(USERS_KEY, JSON.stringify(users));

        console.log('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ–º —Ñ–æ—Ä–º–∞—Ç–µ:', newUser);
        console.log('–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:', users.length);

        return {
            success: true,
            user: newUser
        };
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:', error);
        return {
            success: false,
            message: '–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö'
        };
    }
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
function checkUserCredentials(email, password) {
    const users = getUsers();
    const user = users.find(user =>
        user.email.toLowerCase() === email.toLowerCase() &&
        user.password === password
    );
    return user || null;
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
function debugShowUsers() {
    const users = getUsers();
    console.log('=== –í–°–ï –°–û–•–†–ê–ù–ï–ù–ù–´–ï –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ò ===');
    console.log(`–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: ${users.length}`);

    if (users.length === 0) {
        console.log('–ù–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π');
    } else {
        users.forEach((user, index) => {
            console.log(`${index + 1}. ID: ${user.id}`);
            console.log(`   –ò–º—è: ${user.fullName}`);
            console.log(`   Email: ${user.email}`);
            console.log(`   –†–æ–ª—å: ${user.role}`);
            console.log(`   –°—Ç–∞—Ç—É—Å: ${user.status}`);
            console.log(`   –î–∞—Ç–∞: ${new Date(user.createdAt).toLocaleString('ru-RU')}`);
            console.log('---');
        });
    }
    console.log('====================================');
    return users;
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
function initializeTestData() {
    const users = getUsers();

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    const testEmails = ['parent@example.com', 'child@example.com', 'admin@example.com'];
    let hasTestUsers = false;

    for (const email of testEmails) {
        if (users.find(user => user.email === email)) {
            hasTestUsers = true;
            break;
        }
    }

    // –ï—Å–ª–∏ —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–µ—Ç, –¥–æ–±–∞–≤–ª—è–µ–º –∏—Ö
    if (!hasTestUsers && users.length === 0) {
        console.log('–°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π...');

        const testUsers = [
            {
                id: '1_' + Date.now(),
                fullName: '–¢–µ—Å—Ç–æ–≤—ã–π –†–æ–¥–∏—Ç–µ–ª—å',
                email: 'parent@example.com',
                password: '123456',
                role: 'parent',
                childAge: '5-6',
                status: 'active',
                newsletter: true,
                createdAt: new Date().toISOString(),
                updatedAt: new Date().toISOString()
            },
            {
                id: '2_' + Date.now(),
                fullName: '–¢–µ—Å—Ç–æ–≤—ã–π –î–æ—à–∫–æ–ª—å–Ω–∏–∫',
                email: 'child@example.com',
                password: '123456',
                role: 'child',
                status: 'active',
                newsletter: false,
                createdAt: new Date().toISOString(),
                updatedAt: new Date().toISOString()
            },
            {
                id: '3_' + Date.now(),
                fullName: '–¢–µ—Å—Ç–æ–≤—ã–π –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä',
                email: 'admin@example.com',
                password: '123456',
                role: 'admin',
                adminCode: 'LLL',
                adminPosition: 'superadmin',
                status: 'active',
                newsletter: false,
                createdAt: new Date().toISOString(),
                updatedAt: new Date().toISOString()
            }
        ];

        testUsers.forEach(user => {
            const result = saveUser(user);
            if (result.success) {
                console.log(`–¢–µ—Å—Ç–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ${user.email} —Å–æ–∑–¥–∞–Ω`);
            }
        });
    }

    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—Ç–ª–∞–¥–æ—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
    debugShowUsers();
}

// –û–±–Ω–æ–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã
document.getElementById('registrationForm').addEventListener('submit', function (e) {
    e.preventDefault();

    console.log('–ù–∞—á–∞–ª–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (—Å–æ–≤–º–µ—Å—Ç–∏–º–∞—è –≤–µ—Ä—Å–∏—è)...');

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–æ–ª–µ–π
    const password = passwordInput.value;
    const confirmPassword = confirmPasswordInput.value;

    if (password !== confirmPassword) {
        alert('–û—à–∏–±–∫–∞: –ü–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç!');
        confirmPasswordInput.focus();
        return;
    }

    if (password.length < 6) {
        alert('–û—à–∏–±–∫–∞: –ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤!');
        passwordInput.focus();
        return;
    }

    // –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã
    const formData = {
        fullName: document.getElementById('fullName').value.trim(),
        email: document.getElementById('email').value.trim().toLowerCase(),
        password: password,
        role: roleInput.value,
        newsletter: document.getElementById('newsletter').checked,
        terms: document.getElementById('terms').checked
    };

    // –î–æ–±–∞–≤–ª—è–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–æ–ª–∏
    if (formData.role === 'parent') {
        formData.childAge = document.getElementById('childAge').value;
        if (!formData.childAge) {
            alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –≤–æ–∑—Ä–∞—Å—Ç —Ä–µ–±–µ–Ω–∫–∞!');
            return;
        }
    } else if (formData.role === 'admin') {
        formData.adminCode = adminCodeInput.value;
        formData.adminPosition = adminPositionSelect.value;

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
        if (formData.adminCode !== 'LLL') {
            alert('–ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞! –î–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–¥: LLL');
            return;
        }

        if (!formData.adminPosition) {
            alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –¥–æ–ª–∂–Ω–æ—Å—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞!');
            return;
        }
    }

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ —Å–æ–≥–ª–∞—Å–∏–µ —Å —É—Å–ª–æ–≤–∏—è–º–∏
    if (!formData.terms) {
        alert('–í—ã –¥–æ–ª–∂–Ω—ã —Å–æ–≥–ª–∞—Å–∏—Ç—å—Å—è —Å —É—Å–ª–æ–≤–∏—è–º–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è!');
        return;
    }

    console.log('–î–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:', formData);

    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
    const result = saveUser(formData);

    if (!result.success) {
        alert(result.message);
        return;
    }

    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
    let roleMessage = '';
    switch (formData.role) {
        case 'parent':
            roleMessage = '–í—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –∫–∞–∫ —Ä–æ–¥–∏—Ç–µ–ª—å.';
            break;
        case 'child':
            roleMessage = '–í—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –∫–∞–∫ –¥–æ—à–∫–æ–ª—å–Ω–∏–∫. –ü—Ä–∏—è—Ç–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è!';
            break;
        case 'admin':
            roleMessage = `–í—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä (${formData.adminPosition}). –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ—Å–ª–µ –≤—Ö–æ–¥–∞.`;
            break;
    }

    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–µ–∫—É—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –≤ sessionStorage
    sessionStorage.setItem(CURRENT_USER_KEY, JSON.stringify({
        id: result.user.id,
        fullName: result.user.fullName,
        email: result.user.email,
        role: result.user.role,
        childAge: result.user.childAge || '',
        adminPosition: result.user.adminPosition || ''
    }));

    // –¢–∞–∫–∂–µ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
    localStorage.setItem('currentUser', JSON.stringify({
        id: result.user.id,
        fullName: result.user.fullName,
        email: result.user.email,
        role: result.user.role
    }));

    console.log('–î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ sessionStorage –∏ localStorage');

    alert(`‚úÖ –£—Ä–∞! –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ!\n\n–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ${formData.fullName}!\n${roleMessage}\n\n–°–µ–π—á–∞—Å –≤—ã –±—É–¥–µ—Ç–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç...`);

    // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∞–∫–∫–∞—É–Ω—Ç–∞ —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã
    setTimeout(() => {
        window.location.href = 'account.html';
    }, 2000);
});

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
document.addEventListener('DOMContentLoaded', function() {
    console.log('–°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
    initializeTestData();
    debugShowUsers();
});
    </script>
</body>
</html>
